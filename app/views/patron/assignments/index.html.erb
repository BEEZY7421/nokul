<div class='row'>
  <div class='col-lg-12'>
    <%= action_bar do %>
      <%= link_to fa_icon('home', text: t('layouts.shared.sidebar.authorizations')),
                  :patron,
                  class: 'btn btn-outline-primary' %>
    <% end %>
    <div class='card'>
      <div class='card-header'>
        <%= fa_icon 'align-justify', text: t('.card_header') %>
      </div>
      <div class='card-body'>
        <%= render 'layouts/shared/smart_search_form',
                   path: patron_assignments_path,
                   placeholder: t('.smart_search_placeholder') %>
        <table class='table table-responsive-sm'>
          <thead>
            <tr>
              <th><%= t('.id_number') %></th>
              <th><%= t('.email') %></th>
              <th><%= t('.first_name') %></th>
              <th><%= t('.last_name') %></th>
              <th><%= t('actions') %></th>
            </tr>
          </thead>
          <tbody>
            <% @users.each do |user| %>
              <tr>
                <td><%= user.id_number %></td>
                <td><%= user.email %></td>
                <td><%= user.identities.user_identity.try(:first_name) %></td>
                <td><%= user.identities.user_identity.try(:last_name) %></td>
                <td>
                  <%= link_to_show patron_assignment_path(user) %>
                  <%= link_to_edit t('.assignment'), edit_patron_assignment_path(user) %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
    <nav aria-label='pagination'>
      <ul class='pagination justify-content-center'>
        <%== pagy_bootstrap_nav(@pagy) %>
      </ul>
    </nav>
  </div>
</div>

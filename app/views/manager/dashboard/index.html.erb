<%= javascript_include_tag 'chart' %>
<div data-controller="dashboard">
  <h1 data-target="dashboard.output"></h1>
</div>
<div class="col-sm-6 col-md-2">
  <div class="card text-white bg-info">
    <div class="card-body">
      <div class="h1 text-muted text-right mb-4"><i class="icon-people"></i></div>
      <div class="text-value"><%= Xokul::Ubs::Statistic::Student.by_genders.sum { |item| item[:number_of_students] } %></div>
      <small class="text-muted text-uppercase font-weight-bold">Öğrenci</small>
      <div class="progress progress-white progress-xs mt-3">
        <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div id="genders_and_degrees" class="col-sm-6" style="min-height:400px;"></div>
</div>

<script type="text/javascript">
  var app = echarts.init(document.getElementById('genders_and_degrees'));

  option = {
    legend: {},
    tooltip: {},
    dataset: {
      source: [
        ['product', '2015', '2016', '2017'],
        ['Matcha Latte', 43.3, 85.8, 93.7],
        ['Milk Tea', 83.1, 73.4, 55.1],
        ['Cheese Cocoa', 86.4, 65.2, 82.5],
        ['Walnut Brownie', 72.4, 53.9, 39.1]
      ]
    },
    xAxis: {type: 'category'},
    yAxis: {},
    series: [
        {type: 'bar'},
        {type: 'bar'},
        {type: 'bar'}
    ]
  };

  // use configuration item and data specified to show chart
  app.setOption(option);

  $(function () {
    $(window).on('resize', resize);
    $(".menu-toggle").on('click', resize);

    function resize() {
      setTimeout(function() {
        app.resize();
      }, 200);
    }
  });
</script>
